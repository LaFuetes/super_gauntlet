<div class="container">
    <div class="starter-template col-md-6">
        <h1>Super Gauntlet
            <small>Fighter</small>
        </h1>
        <img src="http://placehold.it/500x150" alt="...">
        <blockquote>
            <p>Won my freedom, but I couldn't pay the bills. Guess the best thing to do is keep getting paid to chop heads off.</p>
            <small> A mercenary fighter on the road to Irlaria <cite title="Source Title">Source Title</cite></small>
        </blockquote>


        <p>
            The fighter is the carry of the team. He should be able to do massive dammage, clear large mob waves, or be a brick wall so that the ranged players can sustain.
        </p>
        <br />
        <br />
        <h4>Default Fighter Characteristics</h4>
        <table class="table table-bordered">
            <tr>
                <th>Build</th>
                <th>Strengths</th>
                <th>Weaknesses</th>
                <th>Abilities</th>
            </tr>

            <tr>
                <td>Bruiser</td>
                <td>Damage</td>
                <td>Speed</td>
                <td>Smash, Crippple, Wirlwind</td>
            </tr>
            <tr>
                <td>Tank</td>
                <td>Defence</td>
                <td>Speed</td>
                <td>Sprint, Fear, Defend</td>
            </tr>
        </table>
        <br />
        <h4>Skill Options </h4>

        <p>
            Sprint: Lets you run, helping you close the distance between enemies. Also helpful in escaping with your life.(small cooldown)
        </p>
        <p>
            Smash: Do massive damage to a single enemy (small cooldown)
        </p>
        <p>
            Fear: When fear is used all p deal 1.5 damage to each target that has fear on it. (large cooldown)
        </p>
        <p>
            Cripple: Take out an enemies leg to help lower it's movement speed and attack speed. (medium cooldown)
        </p>
        <p>
            Wirlwind: You spin 3 times, dealing dammage to any enemy near you.
        </p>
        <p>
            Defend: You take .5 damage for 3 seconds. (medium-large cooldown)
        </p>

        <h4>Attack Options</h4>
        <p>You should focus on killing mobs that are trying to kill your ranged fighters. If you are playing as a tank you can help them by standing in the way of a charged attack. If you are a bruiser you should focus on the stronger enemies, kill them quickly and move on the the tiny (less harmful) mobs.
        </p>
    </div>
    <div class="starter-template col-md-6">
        <h1>Customize <small>Fighter</small></h1>
        <hr />
        <form class="form-horizontal" id="customization-form" method="get" action="">
            <div class="form-group">
                <label for="userName" class="col-lg-2 sg-control-label">Username</label>
                <div class="col-lg-10">
                    <input type="text" class="form-control" id="userName" placeholder='Username (example: "Krull")'>
                </div>
            </div>
            <div class="username-error"><strong class="text-danger"></strong></div>
            <hr />
            <div class="form-group">
                <h4>Ability Scores <small>Choose Wisely</small></h4>
                <p class="help-block">Increase your core abilities as you see fit.
                    You have 6 points to divide among your Strength, Dexterity,
                    and Constitution. These additional points will
                    be added to your class' base ability scores.
                </p>
            </div>
            <strong>Strength</strong>
            <div class="form-group">
                <label for="str" class="col-lg-offset-1 col-lg-3 sg-help-block">Base 14 +</label>
                <div class="col-lg-2">
                    <input  class="form-control number-required" id="str" type="text">
                </div>
            </div>
            <strong>Dexterity</strong>
            <div class="form-group">
                <label for="dex" class="col-lg-offset-1 col-lg-3 sg-help-block">Base 10 +</label>
                <div class="col-lg-2">
                    <input type="text" class="form-control number-required" id="dex" type="text">
                </div>
            </div>
            <strong>Constitution</strong>
            <div class="form-group">
                <label for="con" class="col-lg-offset-1 col-lg-3 sg-help-block">Base 14 +</label>
                <div class="col-lg-2">
                    <input type="text" class="form-control number-required" id="con" type="text">
                </div>
            </div>
            <div class="abilities-error"><strong class="text-danger"></strong></div>
            <hr />
            <div class="row">
             <h4>Abilities <small>Choose Wisely</small></h4>
                <div class="col-lg-6">
                    <form class="col-lg-6">
                        <h5><strong>Level 1</strong></h5>
                        <div class="radio">
                            <label class="help-block">
                                <input type="radio" name="optionsRadios" id="weapon1" value="option1" checked>Smash
                            </label>
                        </div>
                        <div class="radio">
                            <label class="help-block">
                                <input type="radio" name="optionsRadios" id="weapon2" value="option2">Cripple
                            </label>
                        </div>
                    </form>
                </div>
                <div class="col-lg-6">
                    <form>
                        <h5><strong>Level 2</strong></h5>
                        <div class="radio">
                            <label class="help-block">
                                <input type="radio" name="optionsRadios" id="magicItem1" value="option1" checked>Wirlwind
                            </label>
                        </div>
                        <div class="radio">
                            <label class="help-block">
                                <input type="radio" name="optionsRadios" id="magicItem2" value="option2">Defend
                            </label>
                        </div>
                    </form>
                </div>
            </div>
            <hr />
            <div class="form-group pull-right spacer">
            <p>
                <button id="submit" class="btn btn-primary btn-lg">Submit</button>
                <a href="#gameView"  id="joinGame" class="btn btn-default btn-lg disabled">Join Game</a>
            </p>
            </div>
        </form>

    </div>
</div>

<script>

    function initializeFighter(){
        var name = $("#userName").val(),
                str = parseInt($("#str").val()),
                con = parseInt($("#con").val()),
                dex = parseInt($("#dex").val());

        window.localPlayer = new Player();
        localPlayer.set({username: name});
        localPlayer.set({role: 0});
        localPlayer.set({str: 14 + str});
        localPlayer.set({con: 14 + con});
        localPlayer.set({dex: 10 + dex});
        localPlayer.set({speed: localPlayer.get("speed") + ((10 + dex)/2)});
        localPlayer.set({ac: localPlayer.get("ac") + ((10 + dex)/2)});
        localPlayer.set({hp: localPlayer.get("hp") + (localPlayer.get("level") * (((14 + con)/2) + 12))});
        console.log($('#weapon1').is(':checked'));
        if ($('#weapon1').is(':checked')){
            localPlayer.set({weapon: "weapon1"});
        } else {
            localPlayer.set({weapon: "weapon2"});
        }
        console.log($('#magicItem1').is(':checked'));
        if ($('#magicItem1').is(':checked')){
            localPlayer.set({items: "magicItem1"});
        } else {
            localPlayer.set({items: "magicItem2"});
        }

        console.log(localPlayer.toJSON());
    }

    $(document).ready(function(){

        var notValid = true;

        $("#userName").blur(function(){
            if(this.value == ''){
                $(this).closest('.form-group').removeClass('has-success').addClass('has-error');
                $(".username-error").addClass('show').removeClass('hide');
            } else {
                $(this).closest('.form-group').removeClass('has-error').addClass('has-success');
                $(".username-error").addClass('hide').removeClass('show');
            }
        });

        $(".number-required").blur(function(){
            var regExp = /^(\d|,)+$/;
            var total = parseInt($("#str").val()) + parseInt($("#dex").val()) + parseInt($("#con").val());

            if(!(regExp.test(parseInt($(this).val())))){
                $(this).closest('.form-group').removeClass('has-success').addClass('has-error');
                $("#customization-form div.abilities-error strong.text-danger").html("You may only enter numbers for your ability scores.");
            } else {
                $(this).closest('.form-group').removeClass('has-error').addClass('has-success');
                $("#customization-form div.abilities-error strong.text-danger").html("");
            }
        });

        $("#submit").click(function(){
            console.log('clicked next button.');

            var total = parseInt($("#str").val()) + parseInt($("#dex").val()) + parseInt($("#con").val());
            console.log("total = " + total);

            if(total != 6){
                $(".number-required").closest('.form-group').removeClass('has-success').addClass('has-error');
                $("#customization-form div.abilities-error strong.text-danger").html("Your ability score fields must sum to 6.");
            } else {
                $(".number-required").closest('.form-group').removeClass('has-error').addClass('has-success');
                $("#customization-form div.abilities-error strong.text-danger").html("");
            }

            if($("#userName").val() == ''){
                $("#userName").closest('.form-group').removeClass('has-success').addClass('has-error');
                $("#userName").closest('label.control-label').removeClass('has-error');
                $("#customization-form div.username-error strong.text-danger").html("You must enter a username.");
            }

            if(total == 6 && $("#userName").val() != ''){
                notValid = false;
                $('#joinGame').removeClass('disabled');
            }

        });

        $('#joinGame').click(function(e) {
            if(notValid){
                e.preventDefault();
            } else {
                initializeFighter();
            }
        });

    });

</script>




